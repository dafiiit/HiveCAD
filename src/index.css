@tailwind base;
@tailwind components;
@tailwind utilities;

/* HiveCAD Design System - dark and light theme aware */

@layer base {
  :root {
    /* Core backgrounds - dark slate tones */
    --background: 210 25% 12%;
    --foreground: 210 20% 92%;

    /* Panel backgrounds */
    --card: 210 25% 15%;
    --card-foreground: 210 20% 92%;

    --popover: 210 25% 18%;
    --popover-foreground: 210 20% 92%;

    /* Primary - CAD accent blue */
    --primary: 207 85% 55%;
    --primary-foreground: 210 25% 8%;

    /* Secondary - toolbar background */
    --secondary: 210 20% 22%;
    --secondary-foreground: 210 20% 88%;

    /* Muted - subtle backgrounds */
    --muted: 210 18% 18%;
    --muted-foreground: 210 15% 55%;

    /* Accent - highlights and selections */
    --accent: 207 75% 45%;
    --accent-foreground: 210 25% 98%;

    /* Destructive */
    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 100%;

    /* Borders and inputs */
    --border: 210 20% 25%;
    --input: 210 20% 20%;
    --ring: 207 85% 55%;

    /* Radius */
    --radius: 0.75rem;

    /* CAD-specific tokens */
    --toolbar-bg: 210 22% 20%;
    --toolbar-border: 210 20% 28%;
    --panel-bg: 210 25% 14%;
    --panel-header: 210 22% 18%;
    --viewport-bg: 210 30% 16%;
    --grid-line: 210 20% 25%;
    --grid-axis: 207 70% 50%;
    --selection-blue: 207 85% 55%;
    --icon-default: 210 15% 70%;
    --icon-hover: 210 20% 90%;
    --tab-active: 207 80% 50%;
    --timeline-bg: 210 25% 11%;
    --viewcube-bg: 210 20% 30%;
    --viewcube-face: 210 18% 40%;
    --viewcube-edge: 210 15% 50%;
    --sketch-grid: 210 25% 28%;
    --sketch-origin: 0 65% 55%;

    /* Sidebar */
    --sidebar-background: 210 25% 13%;
    --sidebar-foreground: 210 20% 85%;
    --sidebar-primary: 207 85% 55%;
    --sidebar-primary-foreground: 210 25% 8%;
    --sidebar-accent: 210 22% 20%;
    --sidebar-accent-foreground: 210 20% 90%;
    --sidebar-border: 210 20% 22%;
    --sidebar-ring: 207 85% 55%;
  }

  .dark {
    /* Same as root - this is a dark-first theme */
    --background: 210 25% 12%;
    --foreground: 210 20% 92%;
  }

  .light {
    /* Light mode overrides */
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;

    /* Panel backgrounds - Pure whites with clean text */
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    /* Primary */
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;

    /* Secondary - subtle gray for hover/selection items */
    --secondary: 210 40% 95%;
    --secondary-foreground: 222 47% 11%;

    /* Muted */
    --muted: 210 40% 94%;
    --muted-foreground: 215.4 16.3% 42.9%;

    /* Accent + interaction */
    --accent: 217.2 91.2% 59.8%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 72.2% 50.6%;
    --destructive-foreground: 0 0% 98%;
    --ring: 221.2 83.2% 53.3%;

    /* Borders */
    --border: 214.3 31.8% 88%;
    --input: 214.3 31.8% 88%;

    /* CAD-specific tokens */
    --toolbar-bg: 210 40% 96%;
    --toolbar-border: 214.3 31.8% 80%;
    --panel-bg: 0 0% 100%;
    --panel-header: 210 20% 90%;

    /* Keep viewport dark in light mode for modeling contrast */
    --viewport-bg: 210 30% 16%;

    --grid-line: 210 20% 25%;
    --grid-axis: 207 70% 50%;
    --selection-blue: 221.2 83.2% 53.3%;
    --sketch-grid: 210 25% 28%;
    --sketch-origin: 0 65% 55%;

    --icon-default: 215.4 16.3% 40%;
    --icon-hover: 222.2 47.4% 11.2%;

    --tab-active: 221.2 83.2% 53.3%;
    --timeline-bg: 210 40% 98%;

    /* Viewcube */
    --viewcube-bg: 210 40% 91%;
    --viewcube-face: 210 38% 96%;
    --viewcube-edge: 214 28% 74%;

    /* Sidebar */
    --sidebar-background: 210 40% 96%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-primary: 221.2 83.2% 53.3%;
    --sidebar-primary-foreground: 210 40% 98%;
    --sidebar-accent: 210 40% 96.1%;
    --sidebar-accent-foreground: 222.2 47.4% 11.2%;
    --sidebar-border: 214.3 31.8% 91.4%;
    --sidebar-ring: 221.2 83.2% 53.3%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html,
  body,
  #root {
    @apply h-full w-full;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    font-size: 12px;
    overflow: hidden;
  }
}

@layer components {

  /* CAD Toolbar Styles */
  .cad-toolbar {
    @apply bg-toolbar border-b border-toolbar-border;
  }

  .cad-toolbar-tab {
    @apply px-3 py-1.5 text-xs font-medium uppercase tracking-wide text-muted-foreground;
    @apply rounded-md hover:text-foreground hover:bg-secondary/60 transition-all duration-150 cursor-pointer;
  }

  .cad-toolbar-tab-active {
    @apply text-foreground bg-secondary/80 border border-tab-active/30 shadow-sm;
  }

  .cad-tool-button {
    @apply relative isolate flex flex-col items-center justify-center gap-0.5 px-2 py-1.5 rounded-xl;
    @apply text-icon-default hover:text-icon-hover hover:bg-secondary/70 transition-all duration-200;
    @apply cursor-pointer min-w-[52px] min-h-[56px] border border-transparent;
  }

  .cad-tool-button-active {
    @apply bg-accent/15 text-accent border-accent/45 shadow-sm;
    animation: cad-tool-active-pulse 1.6s ease-out;
  }

  .cad-tool-button:focus-visible {
    @apply outline-none ring-2 ring-ring/50;
  }

  .cad-tool-button-icon {
    @apply w-6 h-6 flex items-center justify-center transition-transform duration-200 ease-out;
  }

  .cad-tool-button-label {
    @apply text-[10px] font-medium transition-colors duration-200;
  }

  .cad-tool-button-active .cad-tool-button-icon {
    animation: cad-tool-icon-morph 260ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  .cad-tool-group {
    @apply flex items-end gap-0.5 px-2 border-r border-toolbar-border/70;
  }

  .cad-tool-group-label {
    @apply text-[9px] uppercase tracking-wider text-muted-foreground mt-1 text-center;
  }

  /* Panel Styles */
  .cad-panel {
    @apply bg-panel border-r border-border;
  }

  .cad-panel-header {
    @apply flex items-center justify-between px-3 py-1.5 bg-panel-header text-xs font-medium;
    @apply border-b border-border/80 uppercase tracking-wide;
  }

  /* Tree View Styles */
  .cad-tree-item {
    @apply flex items-center gap-2 px-2 py-1 text-xs cursor-pointer;
    @apply hover:bg-secondary/40 transition-colors;
  }

  .cad-tree-item-selected {
    @apply bg-accent/20 text-accent;
  }

  /* Viewport Styles */
  .cad-viewport {
    @apply bg-viewport relative overflow-hidden;
  }

  /* View Cube */
  .cad-viewcube {
    @apply absolute top-4 right-4 w-20 h-20 cursor-pointer;
  }

  /* Timeline */
  .cad-timeline {
    @apply bg-timeline border-t border-border h-8 flex items-center px-2;
  }

  /* Sketch Palette */
  .cad-sketch-palette {
    @apply bg-panel border-l border-border w-56;
  }

  .cad-checkbox-row {
    @apply flex items-center justify-between px-3 py-1 text-xs hover:bg-secondary/30;
  }
}

@layer utilities {
  .animate-bounce-slow {
    animation: bounce-slow 3s infinite;
  }

  @keyframes bounce-slow {

    0%,
    100% {
      transform: translateY(-5%);
      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
    }

    50% {
      transform: translateY(0);
      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
    }
  }

  @keyframes cad-tool-icon-morph {
    0% {
      transform: scale(0.84) rotate(-6deg);
      filter: saturate(0.8);
    }

    60% {
      transform: scale(1.08) rotate(2deg);
      filter: saturate(1.25);
    }

    100% {
      transform: scale(1) rotate(0deg);
      filter: saturate(1);
    }
  }

  @keyframes cad-tool-active-pulse {
    0% {
      box-shadow: 0 0 0 0 hsl(var(--accent) / 0.25);
    }

    100% {
      box-shadow: 0 0 0 7px hsl(var(--accent) / 0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .cad-tool-button,
    .cad-tool-button-icon {
      transition-duration: 0ms;
    }

    .cad-tool-button-active,
    .cad-tool-button-active .cad-tool-button-icon {
      animation: none;
    }
  }

  .text-icon-default {
    color: hsl(var(--icon-default));
  }

  .text-icon-hover {
    color: hsl(var(--icon-hover));
  }

  .bg-toolbar {
    background-color: hsl(var(--toolbar-bg));
  }

  .border-toolbar-border {
    border-color: hsl(var(--toolbar-border));
  }

  .bg-panel {
    background-color: hsl(var(--panel-bg));
  }

  .bg-panel-header {
    background-color: hsl(var(--panel-header));
  }

  .bg-viewport {
    background-color: hsl(var(--viewport-bg));
  }

  .bg-timeline {
    background-color: hsl(var(--timeline-bg));
  }

  .border-tab-active {
    border-color: hsl(var(--tab-active));
  }

  .bg-viewcube {
    background-color: hsl(var(--viewcube-bg));
  }

  .bg-viewcube-face {
    background-color: hsl(var(--viewcube-face));
  }
}